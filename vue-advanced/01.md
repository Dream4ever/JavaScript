# 第一节课

## 介绍

年后有些同学会去面试，老师很早就有一个观点，中国的互联网行业，尤其是前端，由于 Vue 迅速发展，所以前端很火。Vue 2.0 的发展则带动了前端产业的迅猛发展。Angular 和 React 在 ** 上改变了前端的整个技术栈/技术开发模式。这三大框架对比起来，Vue 更适合作为前端的主要技术使用，所以 Vue 的价值很大。第二点，老师也很高兴地通知大家，大家很幸福，可以抛掉很多不好的开发模式，直接用新的开发模式。老师做技术很早，经历过很多技术的发展。在安卓之前，要开发手机上的应用的话，是极其麻烦的。安卓颠覆了手机应用开发的模式，而 Vue 则是颠覆了前端开发模式中的一种。所以如果想在技术走得更远的话，就应该好好学学 Vue，它的价值是非常大的。老师之前也说过比较推崇 React，当然不矛盾。其实学了几年之后，只会一种编程语言的话，可以觉得是没有进步的。大师姐前几天发了篇文章，最后一段老师是深有感触的：初学者刚开始只做好一件事情就可以了，完全不要 care 别的什么事情，只是知道一下就可以了。等把 Vue **搞定** 之后再去研究别的这些东西就行。以后老师再提到技术的时候，不要觉得老师的话是自相矛盾的，一定要搞清楚老师的意思。关键是一定要抓住主线。

学习 Vue 的方式其实很简单，可以说没有任何一个前端项目的文档写得和 Vue 一样详细。即使这么详细，也可能会看不出文档的重点在哪里。所以徐老师就会来教大家如何有重点地看文档。有条件的同学完全不用买 Vue 的书，可以把这个中文文档打印出来。或者可以每天看一看 Vue 的文档，但是！大家跟着老师的文档去市曹的时候，老师突出的概念，大家一定要重点学习。这不仅在未来学习的理解角度上很重要，而且未来很可能是面试的题目的。

大家在看技术文档的时候，往往忽略的是首页的关键字。拿 Vue 的文档首页来说。

就技术来说，大家常常会看见 “渐进式”架构，就是它本身就是一个循序渐进的。渐进式有两点：首先是这个框架本身是循序渐进的。有些人想一上来就做一个非常牛的框架，但是起点很高，就意味着框架非常大、非常全。第二点来说，因为这个框架很大、很全，用户在使用它的时候，由于只需要局部的功能，却需要把整个系统都弄进来，体验就不够好。如果框架的功能是可以自由组合的话，使用者就可以非常灵活地实现自己的需求了。

再看看首页下面的三个词：易用、灵活、高效。
为什么易用？因为在使用 Vue 的时候，完全不需要学习新知识。只需要掌握了 HTML、CSS、JS 即可，没有第二次学习成本。
灵活：渐进式系统，功能的组合非常方便，按需组合即可。小功能就小规模的组合，大功能就大规模的组合。
高效：Vue 的核心特点，大家常常会比较系统之间的差异，谁速度更快？Vue 不必它俩慢，某些情况下更快。因为 Vue 的代码量很小。
这三点是大家必须知道的 Vue 的特点。

文档页面的“教程”和“API”是最重要的，是大家未来学习过程中需要始终关注的两方面。

## 教程

从教程开始。

### Vue 是什么

这件事情是非常重要的！

不了解“渐进式框架”的同学，可以自己去上网了解一下，然后总结出一个自己所真正理解的概念。

“自底向上逐层应用”这个概念很重要。软件结构其实是有底层、中层、上层这种大致的架构的，以百度上搜到的软件架构图为例，通常都是要分成几层的，**自底向上**，每一层都负责不同的工作。软件的架构是人为分层的，要尝试着弄懂这个概念。

Vue 的核心库只关注 **视图层**：Vue 的发明，其实主要解决的是，数据和 HTML 的双向绑定，两者如何互相更新。Vue 把这件事情解决得非常棒，因此它才有机会在此基础之上去解决更多的问题。

易于上手&整合：现在正在开发一个项目的时候，Vue 可以很方便地融入到现有项目中，不仅不会影响现有项目，还会带来更多的便利。可以一点点地改动，逐渐地把整个项目都重构掉。

而且它可以很方便地与一些既有的项目组合使用，这就说明 Vue 够单纯、够简单，它的界限足够明确。

示例视频大家可以尝试着看一下，不过不看也 OK。

### 起步

官方指南假设大家已经有了前端的中级知识。但是如果大家能够跟着老师的步骤去解读文档的话，有初级知识就足够了。

在 HTML 中引用 Vue 的时候，不要引用官网推荐的国外的 CDN，老师推荐大家用国内的免费的 BootCDN，到这里去搜索 Vue 的链接，然后在自己的项目中引用。而且 BootCDN 可以说是相当全面的，大家要多用。

### 引入 Vue

新建一个空的 sample 文件夹，然后在 VSCode 中打开，并新建一个空的 `index.html` 文件。作为前端开发者，用一个 HTML 来做测试是很常见的。新建完 HTML 文件的基本框架之后，就把 Vue 引入进来。

vue.min 版本体积更小，便于加载。但是非压缩版本有完整的开发功能，建议在开发过程中用这个版本。

然后就把这个页面直接用 Chrome 浏览器打开，当然了，浏览器里面什么都没有，但是用右键菜单选择检查的时候，在浏览器控制台输入 Vue，能够看到会有输出的。打开页面的时候，浏览器就会新建一个进程加载 Vue 的所有东西，最后生成一个 Vue 的对象。

### 声明式渲染

这个概念也要深入研究！

Vue 的核心：允许采用简洁的 **模板语法** 来声明式地将数据渲染到 DOM 结构中的系统。

参照教程添加代码之后，在浏览器中能够看到已经显示出文字了。

JS 中 new 了一个 Vue，里面的 data 有一个属性 message，将其映射到了 DOM 中对应的元素中。

前面说过，引用了 Vue，就有了 Vue 对象。JS 中的 app，是可以直接在终端里面使用的。在浏览器控制台中输入 `app` 的话，就会输出这个变量的相关信息。这样一来，就可以很方便地调试 Vue 程序了！因为可以直接修改 `app` 这个 Vue 对象的各种属性。

解释一下声明式（概念很重要）：是从声明式编程过来的，这是一个编程范式。老师之前说过，要成为 JS 高手，一定要学函数式编程，函数式编程就是一个声明式编程。拿生活中的事情举例：作为一个领导需要管理一家公司，下面有很多部门、很多人，如果领导需要亲自去管每一件事情的过程，那肯定就累死了。其实很多时候不需要关注下面员工做事情的过程，只需要告诉他应该做什么，然后等他的结果就可以了，这种方式就简单多了。

再看一下 Vue 的示例代码：DOM 中的 `{{ message }}` 就是告诉对方用 `message` 变量来更新 DOM 中的内容。而在 JS 中，就不关心 HTML 长什么样了，只是知道需要把数据更新到 `#app` 这个锚点里面，把 `message` 属性的值 `Hello Vue!` 更新到 HTML 就可以了。然后如果 HTML 中没有用到 `message`，那么也不会有任何问题，没有任何错误。JS 只是负责提供数据，HTML 要不要使用就是另一回事了。假如要用 jQuery 的话，就需要显式地指定 DOM 节点，然后手动去更新其中的数据，这就原始多了。

**响应式**（也很重要）：在 JS 代码中修改了数据之后，DOM 中的内容会自动更新，完全不需要用户手动干预！比如手动更改了 `app.message` 的值之后，网页上显示的文本也会相应变化。这就叫响应式，用户只需要更改数据即可，数据的更新完全不用用户操心。

Vue 厉害的地方，不仅在于可以自动更新数据，还在于它可以改变节点属性。比如 `a="b"` 可以理解为一个 HTML 元素的属性名称和对应的值，只不过不会显示在页面中。而这样的属性，浏览器可能不认识，没关系，只要 JS 代码认识就可以了。JS 可以用这样的自定义属性来实现各种各样的操作。Vue 可以把一个属性的值绑定到 DOM 上去：`v-bind:a="test"`，这样就把 data 中的一个数据 `test` 的值绑定到 DOM 属性中了。如果在浏览器控制台中输入 `app.test="test2"`，在 DOM 中的 `a` 属性的值也会对应更改。

标签的属性的内容，用 `v-bind:property="variable"` 来绑定：把 Vue 中的 `variable` 这个数据属性的值，绑定到元素的 `property` 属性上。

对于 Vue 教程中的 `new Date().toLocaleString()` 这个示例，为什么显示的永远是一个固定的值？因为查看所绑定的值的时候，显示的永远是初次初始化时的值。这个值可能看起来是“动态”的，但其实 Vue 只做了一次初始化而已。如果要把示例改为即时显示当前的时间，就需要用别的方式不断刷新 `message` 变量的值了，比如可以用 `setTimeout()` 方法来不断刷新。

文档上说，`v-bind` 特性被称为**指令**。该指令的意思**非常重要**。写代码的时候，工程师之间的沟通一定要专业，一定要快准狠！示例指令的含义是：将元素节点的 `title` 属性和 Vue 示例的 `message` 属性保持一致（背下来，并理解！）。`message` 其实是 `data` （对象）属性中的一个属性，但为什么官方文档中直接就说 `message` 属性？因为其实 Vue 示例的 `data` 属性里的属性，都是直接给了 Vue 示例的。那么为什么在定义的时候还要用 `data` 包一层呢？在浏览器控制台中还会发现 `app.data` 的值是 `undefined`，什么鬼？查看 `app` 变量的值，能够看到，虽然没有 `data` 属性，但是有一个 `_data` 属性，而且这个属性里面有之前定义的 `message` 属性。这是一个关键点，后面会解释。

### 条件与循环

通过操作 Vue 不仅可以让节点显示数据，而且还可以让数据的显示是可选的：只在满足特定情况下的时候才显示节点，比如可以用 `v-if="isShow"` 来控制节点是否显示。

在实际开发中，从后端拿到的数据其实往往都是很大的，所以这个时候循环就非常重要了！

学习任务：看徐老师之前写的 JS 的所有循环遍历方式。老师之前是在看 Vue 官方文档的时候，看到了 `v-for` 指令的用法：`v-for="item in items"`，这其实是用的 JS 中的 `for in` 的写法。但是！老师觉得 Vue 这点做得不好，因为原生 JS 的 `for in` 和 Vue 的 `for in` 是两回事！在原生 JS 中，用 `for in` 遍历数组，是只会把索引遍历处理的，而不是像 Vue 一样，遍历出来的是值！所以老师会写了前面说的那篇文档，这也是一个要注意的知识点。

不过呢，`v-for` 用起来还是很爽的，哈哈。

在学习循环的时候，有几点一定要注意：

1. 如何往元素中添加数据，然后还能保证 Vue 会监听到数据的改变？为什么用简单的添加数组元素的方法不管用，必须用 `push` 方法才行？也就是说，大家要去研究一下 Vue 中的数组如何有效地增删改查。

学习 JS 其实是很好玩的，关键是一定要**主动地**去思考！

### 处理用户输入

先来看一下 `v-model` 指令：用来实现表单输入和应用状态之间的双向绑定。

在示例中，改变 `input` 元素的值的话，就会同步改变上面的 `p` 元素的值，这样就实现了双向绑定。

在学习编程的时候，很多同学对输入的概念不太理解。其实用户的操作都叫输入，不只是用户用键盘输入的文字，用户点击标签也是输入的一种。

这个时候，就可以用 `v-on:click="fun"` 来绑定一个函数到元素上。所绑定的函数 `fun` 是在 Vue 的 `methods` 中定义的。这样当用户点击一个元素的时候，就会调用所绑定的函数。

应用 ES6 语法的新写法：

```javascript
methods: {
  reverseMessage () {
    // do something
  }
}
```

### 组件化应用构造

学 Vue 不学组件化等于没学。再回到文档最开始的部分：Vue 的核心库值关注视图层，前面所学的部分也都是核心库所关注的部分。但是在学组件化的时候，这就涉及到核心库之外的知识了。组件化的概念，对于初学者来说可能不太好理解。

老师尝试着用画图（xDiagram）的方式给大家解释一下：组件自身其实是有属性的，比如它有长度宽度，有内容，有生命周期（可以被创建，被销毁）。

`div` 就是一个组件，是有生命周期的。比如用 `v-if` 就可以控制它的显示状态，自身也是有名字 `div` 的，还有一个描述自身的属性 `id="app-6"`。还可以创建它的同类：`<div id="app-7"></div>`。组件所具备的各种属性，

理解一个组件的关键，

世界上还有一种东西叫做组合组件，可以把复用率很高的内容通过一些组件组合而成，比如网站的导航栏。在 HTML 中，如果一个东西重复（不是说严格重复）出现了两次，就完全可以把这个东西抽象成一个组件了。然后在需要多次用到这个东西的地方，直接多次使用这个组件就好了，就能把组件里的东西用上了。比如图形中的箭头，就完全可以看成是一个长方形和一个三角形的组合嘛！

在实际的网站开发时，页面内容的复用是很常见的，这样的复用也是能够显著提升开发效率的。

文档中组件化的例子，大家可以自己去试一试，一定要多动手！

拿 todo-list 来说，看不懂代码不要紧，关键是要自己亲自动手去尝试一下。

```html
<div id="app-5">
  <todo-item a="b"></todo-item>
  <todo-item a="c"></todo-item>
</div>
```

```javascript
// 注意，这里用的是 Vue 对象，而不是它 new 出来的对象
// component 方法的第一个参数就是组件的名字
// 第二个参数就是组件的 HTML
Vue.component('todo-item', {
  template: '\
    <div id="app-6" class="xx" a="b“>\
      <p>test</p>\
    </div>'
});
```

组件化，可以理解为是重新创建了一个可复用的标签。大家下课之后要品味一下组件化应用构建的这个例子。

组件是自己创建出来的，那么如何把属性 `a="b"`、`a="c"` 传到组件元素中？互相之间如何沟通？这才是组件化的价值。

```javascript
Vue.component('todo-item', {
  props: ['a'],
  template: '\
    <div id="app-6" class="xx" a="b“>\
      <p>{{ a }}</p>\
    </div>'
});
```

所以说组件的一个关键概念，就是如何把数据传入到组件中，让它展示出来。可能有同学会说，我直接在 Vue 示例的 data 中定义对应的属性，然后直接在组件中使用不就行了？显然是不可以的，为什么呢？因为一个组件是独立的，它唯一的数据来源，只能是通过节点的属性传给它的，它没有任何其它方式来获取数据。

把组件的代码抽离到一个单独的文件中，然后在代码中用下面的方式调用组件，就可以把数据通过属性传给组件，这样组件就能把传入的数据显示出来了。

```javascript
<todo-item a="b"></todo-item>
<todo-item a="c"></todo-item>
```

下课之后照着老师的方式，把例子好好地练习一下。把组件放到单独的文件中然后引入，这样能够对组件的概念有个更准确的认知。

Vue 的组件是孤立的，它的数据只能通过属性来传递。

未来学习组件，学习的就是组件之间如何传递数据，父子组件之间如何传递数据，然后认知组件的界限。

下一整节课就是带大家做一个例子：开发一个抽奖的网页，就只用官网文档的"介绍”这一节里面的知识。

最后一个问题：数据是通过属性传给组件的，那么可以把 Vue 示例中的属性传给组件么？当然可以，但是要用 `v-bind`！为什么？那就得再好好看看前面的相关知识了。

组件化和模块化的区别：在于数据的通信。以前在拆分页面结构的时候，用的都是模块化的方式。难点之一就是模块之间的数据通信，模块化的方式采用的是中央数据的方式来解决这个问题，这样就不够优雅了。

为什么老师总在强调组件化是有生命的？因为它有自己的数据，也有和其它组件通讯的方法。

拿 WebApp 最后一课来说，`layout.ejs` 中只是引入了两个模块，没有好的方法把数据传给模块。但是有了组件，这个问题就简单多了。

学习的一个技巧：提炼关键字，归类内容。Vue 的规则其实很简单，今天讲的这些东西，其实就几个关键字。
