# 2018 年第二十六周总结

## 页面设计兼容老旧移动设备

之前用 Vue 开发的页面，在低版本的 Android 和 iOS 上无法正常显示。为了保证最大程度的兼容性，就用原生 JS 来实现各种功能，当然了，样式方面，也要采用不是特别新的 CSS 特性来保证兼容性。

最开始想采用 `viewport unit`，也就是 `vw` 和 `vh` 实现页面设计，因为用这两个单位设计页面，能够保证在各种设备上页面整体效果是相同的。查询了 caniuse，这两个长度单位在 Android 4.4+ 和 iOS 6+ 设备上都是支持的，但是用同事的 Android 5.0 手机上的 UC 浏览器查看，页面的 CSS 设置似乎全都失效了。上网查了查 UC 浏览器，很多前端都吐槽它有各种奇葩的问题。可是国内的统计数据显示 UC 浏览器还是占了相当大的比例的，为了保证兼容性，只好放弃 `viewport unit` 方案。

这个方案不行，只好退而求其次，采用更原始一些的“百分比 + em”方案，在同事手机的 UC 浏览器测试了之后，终于正常显示了。

另外，为了实现预期的定位效果，想使用 `flexbox` 这个属性。上网查了查这个属性的兼容性，老旧设备基本也都支持，只是在不同的设备上可能有这样那样的小问题，可以用 `autoprefixer` 解决。于是简单研究了一下，搞定了这个问题，大致过程见：[让 flexbox 适配低端设备](https://github.com/Dream4ever/knowledge-base/issues/53)。

这样一来，页面设计的兼容性问题就算是解决了。这段时间调试移动设备上的页面，真是被兼容性搞得头大，遇到的各种坑也是在提醒自己不要盲目追新，自学的时候可以随意尝试各种新技术，但是公司的业务还是要先保证兼容性、稳定性。

## 网站压力测试

公司网站压力测试的工作，总算在周末两天的奋斗之后告一段落。因为压测的是阿里云服务器的带宽，所以并没有放在阿里云服务器的内网机器上，而是直接用公司的电脑进行测试。之前咨询了群里专门做测试的同学，了解到了测试的一般方法、流程，和一些注意事项，真是受益匪浅。

既然是压测服务器带宽，那么首先要保证本机所用的带宽不小于服务器带宽。比如服务器是 50Mbps 的带宽，本机却只有 30Mbps 的带宽，那就完全没有测试的必要了。

基本的带宽有了保证之后，还需要确认本机的性能满足测试需求。在这次压测的过程中，就发现办公室 15 年的台式机，相同的压测用例，错误率明显要比 Mac 高，这说明台式机在某些方面还是不如 Mac 的。同样是 50 个并发，Mac 跑几十分钟下来，只有几十个失败的请求，台式机则是上百个了，这真是高下立判。

除此之外，服务器端也要为压测做好准备。公司购买了阿里云的 Web 应用防火墙，默认会阻挡 CC 攻击，而网站压力测试这种大量的、持续的请求刚好符合 CC 攻击的特征。所以在开始压测之前，还需要关闭阿里云 Web 应用防火墙中的相关设置。

最后，如果一台服务器上运行着好几个网站，那么做压力测试的时间尽量选择半夜十二点以后，凌晨五点以前，这个时间段网站的用户应该是最少的，压测得到的数据准确性自然也就是最好的。

## 小结

2018 年已经过去一半了，却感觉自己似乎没什么成长。犀牛书已经一个多月没学了，整天都在写业务代码，以及很多与编程无关的但是又必须做的工作。最近又和徐老师稍微聊了聊，他就建议每天至少刷半小时的 GitHub，了解优秀的项目；同时至少阅读一小时的文章，不断加深自己对技术的理解，拓宽自己的知识面。日拱一卒，不期速成，与大家共勉！

---

最后，依然是[这周的 GitHub 活动统计](https://github.com/Dream4ever?tab=overview&from=2018-06-25&to=2018-07-01)。

![week-26-of-2018](http://owve9bvtw.bkt.clouddn.com/Ftk18vjBCMV9BSmfuGsT51rMkDEW)
