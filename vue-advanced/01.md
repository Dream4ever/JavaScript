# 第一节课

[一张图迅速回顾第一课](http://owve9bvtw.bkt.clouddn.com/Fp33v_5FS-bxsIZd1W4vpjceYdSJ)

## 总结

### 本节课讲到的 Vue 的知识点

- `{{}}`: 将 DOM 节点元素的**内容**与 `data` 中的属性双向绑定
- `v-bind`: 将 DOM 节点元素的**属性**与 `data` 中的属性双向绑定
- `v-model`: 将表单输入与应用状态之双向绑定
- `v-on:click`: 将用户输入与自定义的函数绑定
- `v-for`: 遍历数组或对象的元素/属性
- `v-if`: 根据布尔值决定是否渲染元素

### 重要概念

#### 学习方法

- 每天看一看 Vue 的文档。
- 看各种文档的时候，首页的关键字其实是很重要的，说的都是这项技术的核心部分，要认真揣摩。
- 学习的时候，要善于提炼关键字，把学到的知识整理、归类（这个总结就是应用老师讲的这个方法写出来的，感觉对昨天的讲座的确理解得更清晰了）。

#### Vue 的关键特性

- 渐进式：在学习 Vue 的整个过程中，都可以把每个知识点往渐进式上面套一下，理解一下。
- 易用（没有二次学习成本），灵活（渐进式，按需组合），高效（速度更快）。
- 自底向上逐层应用：可以用下一层的功能，来构建上一层的功能。
- 核心库只关注视图层：Vue 最关键的一点，就是解决了 HTML 和数据的双向绑定的问题。
- 易于上手&整合：可以很方便地融入现有项目中，并且不会影响项目的正常运行。

#### Vue 的使用

- 强烈建议使用 BootCDN 上的各类库，服务器在国内，速度快。
- 开发时建议使用非压缩版的 vue.js，业务发布到服务器上时才建议使用压缩版的 vue.min.js。
- 可以在浏览器控制台中直接操作 Vue 的实例对象。

#### Vue 的关键概念

- 声明式渲染：Vue 是一个允许采用简洁的 **模板语法** 来声明式地将数据渲染到 DOM 中的系统。
- 响应式：在 JS 中修改了数据之后，DOM 中的内容会自动更新，完全不需要用户手动干预。
- `v-bind`（指令）：使 DOM 元素节点的属性和 Vue 实例的属性属性保持一致。
- `data` 属性：在 JS 中定义的 `data` 属性，在最终生成的 Vue 实例中，变成了 `_data` 属性。
- 阅读老师的[JavaScript 的所有循环遍历方式](http://xugaoyang.com/post/5a62fb1d1d92b0371315ab35)这篇文章，对比 Vue 中的 `v-for` 指令的遍历语法，与原生 JS 的 `for in` 语法有何不同。
- 如何对 Vue 中的数组进行增删改查，才能够让 Vue 实时更新数据。
- 弄明白如何向组件中传递数据：定义组件时的 `props` 属性，以及调用组件时传递给组件的数据（直接传值，或者用 `v-bind` 绑定 Vue 实例的数据属性）。
- 自己手写一下官网上的组件化的示例，把组件放到单独的文件之后引入，深入理解组件化的概念。

## 介绍

年后有些同学会去面试，老师很早就有一个观点，中国的互联网行业，尤其是前端，由于 Vue 迅速发展，所以前端很火。Vue 2.0 的发展更是带动了前端产业的迅猛发展。Angular 和 React 间接地改变了前端的整个技术栈/技术开发模式。这三大框架对比起来，Vue 更适合作为前端的主要技术使用，所以学习 Vue 的价值很大。第二点，现在才开始学编程的大家其实很幸福，可以抛掉很多不好的开发模式，直接运用新的开发模式。老师做技术很早，经历过很多技术的发展。在安卓出现之前，要开发手机上的应用的话，是极其麻烦的。安卓颠覆了手机应用开发的模式，而 Vue 则是颠覆了前端开发模式的技术中的一种。所以如果想在技术走得更远的话，一定要好好学学 Vue，它的价值是非常大的。老师之前也说过比较推崇 React，当然不矛盾。其实学了三四年之后，依然只会一种编程语言的话，其实是没有进步的。大师姐前几天发了篇文章，最后一段老师是深有感触的：初学者刚开始只做好一件事情就可以了，完全不要 care 别的什么事情，只是了解一下就可以了。等把 Vue **搞定** 之后再去研究别的这些东西就行。以后老师再提到技术的时候，不要觉得老师的话是自相矛盾的，一定要搞清楚老师的意思。最关键的一点是一定要抓住主线。

学习 Vue 的方式其实很简单，可以说没有任何一个前端项目的文档写得和 Vue 一样详细。即使这么详细，大家也可能看不出文档的重点在哪里。所以徐老师就来教大家如何有重点地看文档。有条件的同学完全不用买 Vue 的书，把中文文档打印出来就可以了。或者可以每天看一看 Vue 的文档，但是！大家跟着老师的文档去实操的时候，老师突出强调的概念，大家一定要重点学习。这不仅在未来学习的理解角度上很重要，而且未来很可能是面试的题目。

大家在看技术文档的时候，往往忽略的是首页的一些关键字。拿 Vue 的文档首页来说，最重要的一个词就是“渐进式”，这个词完全把 Vue 的核心价值观说清楚了。如果大家学完了 Vue，还没有理解什么是渐进式的话，说明学习效果是不到位的。在后面学习 Vue 的过程中，学到任何一个知识点的时候，都可以拿“渐进式”这三个字去套一下，去理解一下。就技术来说，大家常常会看见 “渐进式”架构，就是说它本身就是一个循序渐进的方式。渐进式有两点：首先是这个框架本身的技术迭代是循序渐进的，就是一点一点增加新功能的。而有些人想一上来就做一个非常牛的框架，起点很高，就意味着框架非常大、非常全。第二点来说，因为这个框架很大、很全，用户在使用它的时候，只需要局部的功能，却需要把整个系统都弄进来，体验就不够好。如果框架是渐进式的，提供的功能是可以自由组合的话，使用者就可以非常灵活地实现自己的需求了，只需要一个很小的模块就能解决自己的问题。

再看看首页下面的三个词：易用、灵活、高效。这三点是大家必须知道的 Vue 的特点，面试的时候也可能是问到的。
易用：因为在使用 Vue 的时候，完全不需要学习新知识。只需要掌握了 HTML、CSS、JS 即可，没有第二次学习成本。
灵活：渐进式系统，功能的组合非常方便，按需组合即可。小功能就小规模的组合，大功能就大规模的组合。
高效：Vue 的核心特点，大家常常会比较框架之间的差异，谁速度更快？Vue 不比它俩慢，某些情况下更快。因为 Vue 的代码量很小。

文档页面的“教程”和“API”是最重要的，是大家未来学习过程中需要始终关注的两方面。

## 教程

从教程开始。

### Vue 是什么

这件事情是非常重要的！

不了解“渐进式框架”的同学，就自己去上网了解一下，然后总结出一个自己所真正理解的概念。

“自底向上逐层应用”这个概念很重要。软件结构其实是有底层、中层、上层这种大致的架构的，以百度上搜到的软件架构图为例，通常都是分成几层的，**自底向上**，每一层都负责不同的工作。软件的架构不能理解成是一层层叠上去的，只是人为分层的，一定要弄懂这个概念。换句话说，自底向上逐层应用，就是在已经有一个底层架构的功能的时候，就可以利用这个底层的功能，来开发出一个上层的功能，这样就可以得到更强的功能。

Vue 的核心库只关注 **视图层**：Vue 的发明，最关键的就是解决了一个问题：数据和 HTML 的双向绑定，两者如何互相更新。也就是说，数据变更了之后，如何更新 HTML；HTML 变动了之后，如何对应地更改数据。Vue 把这件事情解决得非常棒，因此它才有机会在此基础之上去解决更多的问题。所以这句话和前面的“自底向上逐层应用”都是非常非常重要的。

易于上手&整合：正在开发一个项目的时候，Vue 可以很方便地融入到现有项目中，不仅不会影响现有项目，反而还会显著地提升效率。可以一点点地改动，逐渐地把整个项目都重构掉。

而且它可以很方便地与一些既有的项目组合使用，这就说明 Vue 够单纯、够简单，它的界限足够明确。

文档里提到示例视频大家可以看一下。

### 起步

官方指南假设大家已经有了前端的中级知识。但是如果大家能够跟着老师的步骤去解读文档的话，有初级知识就足够了。

注意，在 HTML 中引用 Vue 的时候，不要引用官网推荐的国外的 CDN，老师推荐大家用国内的免费的 BootCDN，到这里去搜索 Vue 的链接，然后在自己的项目中引用。而且 BootCDN 可以说是相当全面的，大家在项目中可以多用用。

### 实操——引入 Vue

新建一个空的 sample 文件夹，然后在 VSCode 中打开，并新建一个空的 `index.html` 文件。作为前端开发者，用一个 HTML 来测试基础的功能是很常见的一种方式。新建完 HTML 文件的基本框架（head、body、script）之后，就可以把 Vue 引进来了。

在开发的时候要注意：vue.min 版本体积更小，便于加载。但是非压缩版本有完整的开发功能，建议在开发过程中用这个版本。

然后就把这个页面直接用 Chrome 浏览器打开，当然了，页面中什么都没有，但是用右键菜单选择检查的时候，在浏览器控制台输入 Vue，能够看到会有输出的。因为在浏览器中打开页面的时候，浏览器就会 fork（应该是这个单词？）一个进程去运行 HTML 文件里所有的东西，当然也会加载 Vue 的代码并运行，最后生成一个 Vue 的对象。不管你用不用，这个对象都在那里。

### 声明式渲染

这个概念也要深入研究！

Vue 的核心：允许采用简洁的 **模板语法** 来声明式地将数据渲染到 DOM 中的系统。

参照教程添加代码之后，在浏览器中能够看到已经显示出文字了。

JS 中 new 了一个 Vue，里面的 data 有一个属性 message，将其映射到了 DOM 中对应的元素中。

前面说过，引用了 Vue 文件，就有了 Vue 对象。JS 中的变量 app，是可以直接在终端里面使用的。在浏览器控制台中输入 `app` 的话，就会输出这个变量的相关信息。这样一来，就可以很方便地调试 Vue 程序了！因为可以直接修改 `app` 这个 Vue 对象的各种属性。

解释一下声明式渲染（概念非常重要）：这个概念是从声明式编程过来的，声明式编程是一种编程范式。老师之前说过，要成为 JS 高手，一定要学函数式编程，函数式编程就是一种声明式编程。拿生活中的事情举例：作为一个领导需要管理一家公司，下面有很多部门、很多人，如果领导需要亲自去管每一件事情的过程，那肯定就累死了。其实很多时候不需要关注下面员工做事情的过程，只需要告诉他应该做什么，然后等他的结果就可以了，这种方式就简单多了。

再看一下 Vue 的示例代码：DOM 中的 `{{ message }}` 就是告诉 Vue 用 `message` 变量来更新 DOM 中的内容。而在 JS 中，就不用关心 HTML 长什么样了，只知道需要把数据更新到 `#app` 这个锚点里面，把 `message` 属性的值 `Hello Vue!` 更新到锚点中的 DOM 就可以了。然后如果 DOM 中没有用到 `message`，那么也不会有任何问题，没有任何错误。JS 只是负责提供数据，DOM 要不要用就是另一回事了。但是要用 jQuery 的话，就需要显式地指定 DOM 节点，然后手动去更新其中的数据，这就原始多了。

**响应式**（也很重要）：在 JS 中修改了数据之后，DOM 中的内容会自动更新，完全不需要用户手动干预！比如手动更改了 `app.message` 的值之后，网页上显示的文本也会相应变化。这就叫响应式，用户只需要更改数据即可，数据的更新完全不需要用户操心。

Vue 厉害的地方，不仅在于可以自动更新数据，它还可以改变 DOM 节点的各种属性。比如 `a="b"` 可以理解为一个 HTML 元素的属性名称和对应的值，只不过这个属性不会反映在页面中而已。这样的属性，浏览器可能不认识，没关系，只要 JS 代码认识就可以了。JS 可以用这样的自定义属性来实现各种各样的操作。Vue 可以把一个属性的值绑定到 DOM 上去：`v-bind:a="test"`，这样就把 data 中的一个属性 `test` 的值绑定到 DOM 属性 `a` 中了。如果在浏览器控制台中输入 `app.test="test2"`，在 DOM 中的 `a` 属性的值也会对应更改。这就是响应式。

标签的属性的内容，用 `v-bind:property="variable"` 来绑定：把 Vue 中的 `variable` 这个数据属性的值，绑定到 DOM 元素的 `property` 属性上。

对于 Vue 教程中的 `new Date().toLocaleString()` 这个示例，为什么显示的永远是一个固定的值？因为查看所绑定的值的时候，显示的永远是初次初始化时的值。这个值可能看起来是“动态”的，但其实 data 属性中的赋值，**只会在初始化的时候做一次而已**。如果要把示例改为实时显示当前的时间，就需要用别的方式不断刷新 `message` 变量的值了，比如可以用 `setTimeout()` 方法来不断刷新。

文档上说，`v-bind` 特性也叫**指令**。指令的含义**非常重要**。写代码的时候，工程师之间的沟通一定要专业，表达一定要**精准**！示例代码中，指令的含义是：使元素节点的 `title` 属性和 Vue 实例的 `message` 属性保持一致（背下来，并理解！）。`message` 其实是 `data` （对象）属性中的一个属性，但为什么官方文档中直接就说 `message` 属性？因为 Vue 示例的 `data` 属性里的属性，最终都是给了 Vue 示例的。那么为什么在定义的时候还要用 `data` 包一层呢？在浏览器控制台中还会发现 `app.data` 的值是 `undefined`，什么鬼？既然跟老师学了这么久了，就试着自己研究一下：输出并查看 `app` 变量的值，能够看到，虽然没有 `data` 属性，但是有一个 `_data` 属性，而且这个 `_data` 属性里面有之前定义的 `message` 属性。这是一个关键点，后面会解释。

### 条件与循环

通过操作 Vue 不仅可以让节点显示数据，而且还可以让数据的显示是可选的：只在满足特定情况下的时候才显示节点，比如可以用 `v-if="isShow"` 来控制节点是否显示。这就是 Vue 的条件渲染。

在实际开发中，从后端拿到的数据其实往往都是很大的，所以这个时候循环就非常重要了！

学习任务：看徐老师之前写的 [JavaScript 的所有循环遍历方式](http://xugaoyang.com/post/5a62fb1d1d92b0371315ab35)。老师之前是在看 Vue 官方文档的时候，看到了 `v-for` 指令的用法：`v-for="item in items"`，这其实是用的 JS 中的 `for in` 的写法。但是！老师觉得 Vue 这点做得不好，因为原生 JS 的 `for in` 和 Vue 的 `for in` 是两回事！在原生 JS 中，用 `for in` 遍历数组，是只能遍历到索引，而不是像 Vue 一样，遍历出来的是数组的值！所以老师才写了前面说的那篇文档，这也是一个要注意的知识点。

不过呢，`v-for` 用起来还是很爽的，哈哈。

在学习循环的时候，有几点一定要注意（貌似只说了下面一点？） ：

1. 如何往数组中添加/删除数据，然后还能保证 Vue 会监听到数据的改变？为什么用简单的添加数组元素的方法不管用，必须用 `push` 方法才行？也就是说，大家要去研究一下 Vue 中的数组如何有效地增删改查。经过老师的实际操作，发现普通的添加数组元素的方法是会更改数组的，但是并不会让 Vue 主动更新数据。只有用 `push` 方法添加元素，Vue 才会主动更新数据。

学习 JS 其实是很好玩的，关键是一定要**主动地**去思考！

### 处理用户输入

先来看一下 `v-model` 指令：**用来实现表单输入和应用状态之间的双向绑定**。

在示例中，改变 `input` 元素的值的话，就会同步改变上面的 `p` 元素的值，这样就实现了双向绑定。

在学习编程的时候，很多同学对输入的概念不太理解。其实用户的操作都叫输入，不只是用户用键盘输入的文字，用户点击标签也是输入的一种。

接着看 `v-on` 的示例：可以用 `v-on:click="fun"` 来绑定函数到元素上。所绑定的函数 `fun` 是在 Vue 的 `methods` 中定义的。这样当用户点击一个元素的时候，就会调用所绑定的函数。

应用 ES6 语法的新写法：

```javascript
methods: {
  reverseMessage () {
    // do something
  }
}
```

### 组件化应用构造

学 Vue 不学组件化等于没学。先回顾一下文档最开始的部分：Vue 的核心库只关注视图层，前面所学的知识点都是核心库所关注的部分。但是在学组件化的时候，就涉及核心库之外的知识了。组件化的概念，对于初学者来说可能不太好理解。

老师尝试着用画图（xDiagram）的方式给大家解释一下：组件自身其实是有属性的，比如它有长度宽度，有内容，有生命周期（可以被创建，被销毁）。

`div` 也可以看作是一个组件，是有生命周期的。比如可以手动创建它，手动删除它。用 `v-if` 可以控制它的显示状态，自身也是有名字 `div` 的，还有一个描述自身的属性 `id="app-6"`。还可以创建它的同类：`<div id="app-7"></div>`。组件所具备的各种属性，其中一些规定好的是供系统识别的，还有一些属性是可以自定义来实现特定功能的。

世界上还有一种东西叫做组合组件，可以把复用率很高的内容通过一些组件组合而成。在 HTML 中，如果一个东西出现了两次，就完全可以把这个东西抽象成一个组件了。然后在需要多次用到这个它的地方，直接使用这个组件就好了，就能把组件里的东西用上了。比如图形中的箭头，就完全可以看成是一个长方形和一个三角形的组合嘛！

在实际的网站开发时，页面内容的复用是很常见的，这样的复用也是能够显著提升开发效率的。就拿造汽车来说，最开始可以自己造轮胎，造各种零件。但是工业发达、专业化程度高了之后，就完全可以让一家公司专门来造轮胎，汽车制造公司直接把轮胎拿来用就可以了。

文档中组件化的例子，大家可以自己去试一试，一定要多动手！

拿 todo-list 来说，看不懂代码不要紧，关键是要自己亲自动手去尝试一下。

**注意**：在下面的 HTML 中，如果没有定义锚点 `app-5` 的话，Vue 就不知道该从哪里进行初始化虚拟的 DOM，也就没法利用后面所编写的组件了。

```html
<div id="app-5">
  <todo-item a="b"></todo-item>
  <todo-item a="c"></todo-item>
</div>
```

```javascript
// 注意，这里用的是 Vue 对象，而不是它 new 出来的对象
// component 方法的第一个参数就是组件的名字
// 第二个参数就是组件的 HTML
Vue.component('todo-item', {
  template: '\
    <div id="app-6" class="xx" a="b“>\
      <p>test</p>\
    </div>'
});

var app5 = new Vue({
  // some code
});
```

组件化，可以理解为是重新创建了一个可复用的标签，这就显著提升了开发效率。大家下课之后要**仔细品味**一下组件化应用构建的这个例子。

组件是自己创建出来的，那么如何把属性 `a="b"`、`a="c"` 传到组件中？组件之间如何沟通？要弄懂如何向组件传递数据，组件之间以什么样的方式来沟通，这才是学习组件化的价值。

```html
<div id="app-5">
  <todo-item a="hello, js"></todo-item>
  <todo-item a="hello, vue "></todo-item>
</div>
```

```javascript
Vue.component('todo-item', {
  props: ['a'], // 接收一个属性 a
  template: '\
    <div>\
      <p>{{ a }}</p>\
    </div>'
});
```

所以说组件的一个关键概念，就是如何把数据传入到组件中，让它展示出来。可能有同学会说，我直接在 Vue 示例的 data 中定义对应的属性，然后直接在组件中使用不就行了？显然是不可以的，为什么呢？因为一个组件是独立的，它唯一的数据来源，只能是通过节点的属性传给它的，没有任何其它方式来获取数据。

把组件的代码抽离到一个单独的文件中，然后在代码中以第三方库的形式引用并调用组件，就可以把数据通过属性传给组件，这样组件就能把传入的数据显示出来了。

```html
<script src="./lib.js"></script>
```

```javascript
<todo-item a="b"></todo-item>
<todo-item a="c"></todo-item>
```

这样操作下来，我们就弄明白了几个问题：

1. 组件和 Vue 示例中的 `data` 属性里的内容是没有任何关系的。
2. 组件接收数据的唯一方式，就是作为属性传入组件。

下课之后照着老师的方式，把例子好好地练习一下。把组件放到单独的文件中然后引入，这样能够对组件的概念有个更准确的认知。

再来总结一下 Vue 组件的特点：

> Vue 的组件是孤立的，只能把数据以属性的形式传递给组件。

未来学习组件，学习的就是组件之间如何传递数据，父子组件之间如何传递数据，然后认知组件的界限。

## The End

下一整节课就是带大家做一个例子：开发一个抽奖的网页，就只用官网文档的"介绍”这一页里面的知识。

最后一个问题：数据是通过属性传给组件的，那么可以把 Vue 示例中的属性传给组件么？当然可以，但是要用 `v-bind`！为什么？再复习一下前面这个知识点吧（属性要和 `data` 中的内容绑定的话，必须用 `v-bind`）。

组件化和模块化的区别：数据的通信。以前在拆分页面结构的时候，用的都是模块化的方式。难点之一就是模块之间的数据通信，模块化的方式采用的是中央数据的方式来解决这个问题，这样其实是不太好的。

为什么老师总在强调组件化是有生命的？因为它有自己的数据，也有和其它组件通讯的方法。而模块化只是简单地对页面内容进行分块，只是替换了页面的内容而已，没有方法实现模块之间的交流。

拿 WebApp 最后一课来说，`layout.ejs` 中只是引入了两个模块，没有一种好方法可以把数据传给模块。但是有了组件，这个问题就简单多了。

就模块化来说，ejs 模板引擎，jade 模板引擎，做的都是这些工作。

**学习的一个技巧**：提炼关键字，归类/整理内容。Vue 的规则其实很简单，今天讲的这些东西，总结一下的话就能发现其实也就是几个关键字。一个好的架构，用户需要学习的东西应该是很少的。
