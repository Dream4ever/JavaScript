# 文章的增改查

![Express Blog Functions](https://raw.githubusercontent.com/Dream4ever/Pics/master/express-blog-functions.png)

上面这张图，是照着老师的教程做到第19节之后，所完成的各项功能，共包含四个功能：

1. 查询文章列表；
2. 新建一篇文章；
3. 显示一篇文章；
4. 修改一篇文章。

四项功能大致相同，基本上都要经过以下几个流程：

1. 客户端访问指定的网址，Express 解析出网址中的路径（如 `/posts`、`/posts/create` 等）；
2. 根据 `routes/page.js` 中的路由逻辑，将指定的模板文件（如 `views/posts.ejs`）渲染成 HTML 文件并返回至客户端；
3. 客户端执行 HTML 文件中的内容，对于 JS 脚本的异步代码，在执行之后并不会等待结果，所以会先将页面渲染出来。在异步代码获取到数据之后，会再通过 Vue 将数据更新到前端页面中，这就是**客户端渲染**。如果仔细观察的话，能够发现页面先显示出了基本的内容，然后稍微停顿一下，再显示从后端获取到的内容；
4. 所执行的 JS 脚本，都是通过 API 交换数据的。比如发送文章时，JS 脚本将文章内容通过 API `/posts/create` 保存到数据库中；修改文章时，则是先通过 `posts/one/xxxx` 获取到一篇文章的内容，在客户端修改完毕之后，再通过 `/posts/edit/xxxx` 这个 API 将修改后的文章的内容更新至数据库中。在这个过程中，API 就负责与数据库进行交互，“增删改查”的代码通常都是在这里执行的。
